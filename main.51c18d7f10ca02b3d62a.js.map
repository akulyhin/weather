{"version":3,"sources":["webpack:///./js/refs.js","webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./templates/templateCurrentWeather.hbs"],"names":["searchCity","document","getElementById","weatherBox","querySelector","searchBtn","locationBtn","query","localStorage","getItem","apiKey","geoLocation","reload","location","href","navigator","geolocation","getCurrentPosition","latitude","coords","longitude","setItem","fetchWeatherByCity","url","fetch","response","json","fetchWeather","render","data","refs","innerHTML","templateCurrentWeather","jsTemp","querySelectorAll","console","log","forEach","el","temp","textContent","Math","round","addEventListener","removeItem","apiService","value","then","Handlebars","module","exports","template","container","depth0","helpers","partials","stack1","helper","alias1","nullContext","alias2","escapeExpression","alias3","lambda","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hooks","helperMissing","program","noop"],"mappings":"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","file":"main.51c18d7f10ca02b3d62a.js","sourcesContent":["export default {\r\n    searchCity: document.getElementById('searchCity'),\r\n    weatherBox: document.querySelector('.weather-box'),\r\n    searchBtn: document.querySelector('.searchBtn'),\r\n    locationBtn: document.querySelector('.location')\r\n}","import refs from './refs'\r\n\r\n\r\n\r\n  let city = localStorage.getItem(\"city\");\r\n\r\n\r\nexport default {\r\n\r\n    query: `${city}`,\r\n    apiKey: 'ff8084d11c7279450a985d59a31a6700',\r\n\r\n    \r\n    geoLocation() {\r\n      const onGetPosition = location => {\r\n        // console.log(location)\r\n        let latitude = location.coords.latitude;\r\n        let longitude = location.coords.longitude;\r\n\r\n        localStorage.setItem('latitude', latitude);\r\n        localStorage.setItem('longitude', longitude);\r\n        reload();\r\n      };\r\n      function reload () {\r\n        location.href = location.href;\r\n      } \r\n      navigator.geolocation.getCurrentPosition(onGetPosition);\r\n    },\r\n\r\n\r\n    async fetchWeatherByCity () {\r\n      let url = `https://api.openweathermap.org/data/2.5/weather?q=${this.query}&units=metric&lang=ru&appid=${this.apiKey}`;\r\n      const response = await fetch(url);\r\n        \r\n      return response.json();\r\n    },\r\n\r\n    async fetchWeather() {\r\n     let latitude = localStorage.getItem('latitude');\r\n      let longitude = localStorage.getItem('longitude');\r\n\r\n          const url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&units=metric&lang=ru&appid=${this.apiKey}`;\r\n\r\n        const response = await fetch(url);\r\n        \r\n        return response.json();\r\n      }\r\n}","import './sass/styles.scss';\r\nimport apiService from './js/apiService';\r\nimport refs from './js/refs';\r\nimport debounce from 'lodash.debounce';\r\nimport templateCurrentWeather from './templates/templateCurrentWeather.hbs';\r\n\r\nrefs.locationBtn.addEventListener('click', () => {\r\n    localStorage.removeItem(\"city\");\r\n    apiService.geoLocation();\r\n})\r\n\r\nrefs.searchBtn.addEventListener('click', () => {\r\n    localStorage.removeItem(\"city\");\r\n    localStorage.setItem(\"city\", refs.searchCity.value);\r\n    location.href = location.href;\r\n  });\r\n\r\n  if (localStorage.getItem(\"city\")) {\r\n        apiService.fetchWeatherByCity()\r\n         .then(data => {console.log(data),\r\n            render({ data })\r\n        })\r\n    }\r\n\r\n    else if (localStorage.getItem(\"latitude\")) {\r\n        apiService.fetchWeather()\r\n            .then(data => {console.log(data),\r\n            render({ data })\r\n        })\r\n    }\r\n\r\n    else {\r\n        console.log('Нет города')\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\nfunction render (data) {\r\n   refs.weatherBox.innerHTML = `${templateCurrentWeather(data)}`;\r\n    const jsTemp = document.querySelectorAll('.js_temp');\r\n    console.log(jsTemp);\r\n    jsTemp.forEach(el => {\r\n        roundTemp(el.textContent)\r\n    })\r\n}\r\n\r\nfunction roundTemp (temp) {\r\n    Math.round(+temp);\r\n    \r\n}\r\n\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.escapeExpression, alias3=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h2 class=\\\"weather-city\\\">\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":25},\"end\":{\"line\":2,\"column\":33}}}) : helper)))\n    + \"</h2>\\r\\n\\r\\n<div class=\\\"weather_item\\\">\\r\\n<p><span class=\\\"current-temp\\\"><span class=\\\"js_temp\\\">\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp\") : stack1), depth0))\n    + \"</span>°</span></p>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"weather\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":0},\"end\":{\"line\":9,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n\\r\\n<div class=\\\"info_additional\\\">\\r\\n\\r\\n    <div class=\\\"info_item\\\">\\r\\n        <div class=\\\"ii info_label\\\">\\r\\n            По ощущению: \\r\\n        </div>\\r\\n        <div class=\\\"ii info_value\\\">\\r\\n            <span class=\\\"js_temp\\\">\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"feels_like\") : stack1), depth0))\n    + \"</span> C°\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"info_item\\\">\\r\\n        <div class=\\\"ii info_label\\\">\\r\\n            Мин. температура: \\r\\n        </div>\\r\\n        <div class=\\\"ii info_value\\\">\\r\\n            <span class=\\\"js_temp\\\">\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp_min\") : stack1), depth0))\n    + \"</span> C°\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"info_item\\\">\\r\\n        <div class=\\\"ii info_label\\\">\\r\\n            Макс. температура: \\r\\n        </div>\\r\\n        <div class=\\\"ii info_value\\\">\\r\\n            <span class=\\\"js_temp\\\">\"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"main\") : depth0)) != null ? lookupProperty(stack1,\"temp_max\") : stack1), depth0))\n    + \"</span> C°\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n        <div class=\\\"info_item\\\">\\r\\n        <div class=\\\"ii info_label\\\">\\r\\n            Ветер: \\r\\n        </div>\\r\\n        <div class=\\\"ii info_value\\\">\\r\\n            \"\n    + alias2(alias3(((stack1 = (depth0 != null ? lookupProperty(depth0,\"wind\") : depth0)) != null ? lookupProperty(stack1,\"speed\") : stack1), depth0))\n    + \" м/с\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<p><img src=\\\"https://openweathermap.org/img/w/\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"icon\") || (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":46},\"end\":{\"line\":7,\"column\":54}}}) : helper)))\n    + \".png\\\" width=\\\"65\\\" height=\\\"auto\\\"></p>\\r\\n<p class=\\\"description\\\">\"\n    + alias1(container.lambda((depth0 != null ? lookupProperty(depth0,\"description\") : depth0), depth0))\n    + \"</p>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":50,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}